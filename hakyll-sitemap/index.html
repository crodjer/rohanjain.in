<!doctype html><html lang=en-US><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=author content="Rohan Jain"><meta name=description content="Sitemap with Hakyll | Rohan's Personal Web Blog."><meta property="og:title" content="Sitemap with Hakyll"><meta property="og:type" content="article"><meta property="article:published_time" content="2015-08-30T00:00:00+00:00"><meta property="article:modified_time" content="2015-08-30T00:00:00+00:00"><title>Sitemap with Hakyll</title><link rel=canonical href=/hakyll-sitemap/><link rel=stylesheet href=/css/main.min.97ffe0e39b9819392033e2635f05ec47c705d94936b7483bb66889dbf15d7a90.css><link rel="shortcut icon" href=/img/favicon.ico></head><body lang=en><header><a href=/>The Perpetual Amature</a><nav><ul><li><a href=/>Home</a></li><li><a href=/about/>About</a></li></ul></nav></header><main><h1>Sitemap with Hakyll</h1><p>Its fairly trivial to configure <a href=http://jaspervdj.be/hakyll/>Hakyll</a> to generate
sitemaps. Sitemaps helps search engines websites. Similar to any
typical html page, create a template - <code>templates/sitemap.xml</code>:</p><pre><code class=language-xml>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;urlset xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;
$for(entries)$
    &lt;url&gt;
        &lt;loc&gt;$host$$url$&lt;/loc&gt;
        &lt;changefreq&gt;weekly&lt;/changefreq&gt;
        $if(lastmod)$&lt;lastmod&gt;$lastmod$&lt;/lastmod&gt;$endif$
        &lt;priority&gt;0.8&lt;/priority&gt;
    &lt;/url&gt;
$endfor$
&lt;/urlset&gt;
</code></pre><p>Then, using the templates, create a rule which uses all the pages from
the site as entries. Here is what I do:</p><pre><code class=language-haskell>  create [&quot;sitemap.xml&quot;] $ do
         route   idRoute
         compile $ do
           posts &lt;- recentFirst =&lt;&lt; loadAll &quot;posts/*/*&quot;
           pages &lt;- loadAll &quot;pages/*&quot;
           let allPosts = (return (pages ++ posts))
           let sitemapCtx = mconcat
                            [ listField &quot;entries&quot; pageCtx allPosts
                            , constField &quot;host&quot; host
                            , defaultContext
                            ]
           makeItem &quot;&quot;
            &gt;&gt;= loadAndApplyTemplate &quot;templates/sitemap.xml&quot; sitemapCtx
            &gt;&gt;= cleanIndexHtmls
</code></pre><p>This generates <a href=/sitemap.xml>/sitemap.xml</a> which can be submitted to
search engines for indexing.</p></main><footer><a href=/blog>All Posts</a>
<a href=//github.com/crodjer target=_blank rel=noopener>Github</a>
<a href=//linkedin.com/in/crodjer target=_blank rel=noopener>Linkedin</a>
<a href=//twitter.com/__crodjer__ target=_blank rel=noopener>Twitter</a></footer><script data-goatcounter=https://t.rohanjain.in/count async src=/js/count.min.4e3257a9873dba863f309fe89287c9f6e962d7be1758704f13b2608e58008e5f.js></script><noscript><img src="https://t.rohanjain.in/count?p=%2fhakyll-sitemap%2f&t=Sitemap%20with%20Hakyll"></noscript></body></html>