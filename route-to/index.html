<!doctype html><html lang=en-US><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="no-referrer"><meta name=author content="Rohan Jain"><meta name=description content="Switch between networks based on availability | Rohan's Personal Web Blog."><meta property="og:title" content="Switch between networks based on availability"><meta property="og:type" content="article"><meta property="article:published_time" content="2015-08-19T00:00:00+00:00"><meta property="article:modified_time" content="2015-08-19T00:00:00+00:00"><title>Switch between networks based on availability</title><link rel=canonical href=/route-to/><link rel=stylesheet href=/css/main.min.97ffe0e39b9819392033e2635f05ec47c705d94936b7483bb66889dbf15d7a90.css><link rel="shortcut icon" href=/img/favicon.ico><script>let FF_FOUC_FIX</script></head><body lang=en><header><a href=/>The Perpetual Amature</a><nav><ul><li><a href=/>Home</a></li><li><a href=/about/>About</a></li></ul></nav></header><main><article><header><h1>Switch between networks based on availability</h1><small><time datetime=2015-08-19 title='Wed Aug 19 2015 00:00:00 UTC'>Aug 19, 2015</time>
| One minute read</small></header><p>Having been blessed with an unreliable internet, I always have had the need to
change the default route when one goes down. <a href=http://linux.die.net/man/8/ip>ip</a> provides you the required
tooling to do that. I had been doing it so often, that I ended up writing a
function to do this:</p><pre><code class=language-bash>route_to () {
    interface=$1
    route=$(ip route | grep $interface | sed -r 's/\.0\/[[:digit:]]{2,3} /.1 /' | cut -d ' ' -f -4)
    if [ -n &quot;$route&quot; ]; then
        sudo ip route del default &amp;&gt; /dev/null
        sudo ip route replace default via $route
    else
        echo &quot;No routes match: $interface&quot; &gt;&amp;2
    fi
}
</code></pre><p>With this in available in my shell, I can simply do <code>route_to wlan0</code> and my
system will start using <code>wlan0</code> as the default interface.</p></article></main><footer><a href=/blog>All Posts</a>
<a href=//github.com/crodjer target=_blank rel=noopener>Github</a>
<a href=//linkedin.com/in/crodjer target=_blank rel=noopener>Linkedin</a>
<a href=//twitter.com/__crodjer__ target=_blank rel=noopener>Twitter</a></footer><script data-goatcounter=https://t.rohanjain.in/count async src=/js/count.min.4e3257a9873dba863f309fe89287c9f6e962d7be1758704f13b2608e58008e5f.js></script><noscript><img src="https://t.rohanjain.in/count?p=%2froute-to%2f&t=Switch%20between%20networks%20based%20on%20availability"></noscript></body></html>